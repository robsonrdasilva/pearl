!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery||Zepto)}(function(a){var b=function(b,c,d){b=a(b);var g,e=this,f=b.val();c="function"==typeof c?c(b.val(),void 0,b,d):c;var h={invalid:[],getCaret:function(){try{var a,c=0,d=b.get(0),e=document.selection,f=d.selectionStart;return e&&-1===navigator.appVersion.indexOf("MSIE 10")?(a=e.createRange(),a.moveStart("character",b.is("input")?-b.val().length:-b.text().length),c=a.text.length):(f||"0"===f)&&(c=f),c}catch(g){}},setCaret:function(a){try{if(b.is(":focus")){var c,d=b.get(0);d.setSelectionRange?d.setSelectionRange(a,a):d.createTextRange&&(c=d.createTextRange(),c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select())}}catch(e){}},events:function(){b.on("keyup.mask",h.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)}).on("change.mask",function(){b.data("changed",!0)}).on("blur.mask",function(){f===b.val()||b.data("changed")||b.triggerHandler("change"),b.data("changed",!1)}).on("keydown.mask, blur.mask",function(){f=b.val()}).on("focus.mask",function(b){!0===d.selectOnFocus&&a(b.target).select()}).on("focusout.mask",function(){d.clearIfNotMatch&&!g.test(h.val())&&h.val("")})},getRegexMask:function(){for(var b,d,f,g,a=[],h=0;h<c.length;h++)(b=e.translation[c.charAt(h)])?(d=b.pattern.toString().replace(/.{1}$|^.{1}/g,""),f=b.optional,(b=b.recursive)?(a.push(c.charAt(h)),g={digit:c.charAt(h),pattern:d}):a.push(f||b?d+"?":d)):a.push(c.charAt(h).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=a.join(""),g&&(a=a.replace(RegExp("("+g.digit+"(.*"+g.digit+")?)"),"($1)?").replace(RegExp(g.digit,"g"),g.pattern)),RegExp(a)},destroyEvents:function(){b.off("keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(a){var c=b.is("input")?"val":"text";return 0<arguments.length?(b[c]()!==a&&b[c](a),c=b):c=b[c](),c},getMCharsBeforeCount:function(a,b){for(var d=0,f=0,g=c.length;g>f&&a>f;f++)e.translation[c.charAt(f)]||(a=b?a+1:a,d++);return d},caretPos:function(a,b,d,f){return e.translation[c.charAt(Math.min(a-1,c.length-1))]?Math.min(a+d-b-f,d):h.caretPos(a+1,b,d,f)},behaviour:function(b){b=b||window.event,h.invalid=[];var c=b.keyCode||b.which;if(-1===a.inArray(c,e.byPassKeys)){var d=h.getCaret(),f=h.val().length,g=f>d,i=h.getMasked(),j=i.length,k=h.getMCharsBeforeCount(j-1)-h.getMCharsBeforeCount(f-1);return h.val(i),!g||65===c&&b.ctrlKey||(8!==c&&46!==c&&(d=h.caretPos(d,f,j,k)),h.setCaret(d)),h.callbacks(b)}},getMasked:function(a){var o,p,b=[],f=h.val(),g=0,i=c.length,j=0,k=f.length,l=1,m="push",n=-1;for(d.reverse?(m="unshift",l=-1,o=0,g=i-1,j=k-1,p=function(){return g>-1&&j>-1}):(o=i-1,p=function(){return i>g&&k>j});p();){var q=c.charAt(g),r=f.charAt(j),s=e.translation[q];s?(r.match(s.pattern)?(b[m](r),s.recursive&&(-1===n?n=g:g===o&&(g=n-l),o===n&&(g-=l)),g+=l):s.optional?(g+=l,j-=l):s.fallback?(b[m](s.fallback),g+=l,j-=l):h.invalid.push({p:j,v:r,e:s.pattern}),j+=l):(a||b[m](q),r===q&&(j+=l),g+=l)}return a=c.charAt(o),i!==k+1||e.translation[a]||b.push(a),b.join("")},callbacks:function(a){var e=h.val(),g=e!==f,i=[e,a,b,d],j=function(a,b,c){"function"==typeof d[a]&&b&&d[a].apply(this,c)};j("onChange",!0===g,i),j("onKeyPress",!0===g,i),j("onComplete",e.length===c.length,i),j("onInvalid",0<h.invalid.length,[e,a,b,h.invalid,d])}};e.mask=c,e.options=d,e.remove=function(){var a=h.getCaret();return h.destroyEvents(),h.val(e.getCleanVal()),h.setCaret(a-h.getMCharsBeforeCount(a)),b},e.getCleanVal=function(){return h.getMasked(!0)},e.init=function(c){c=c||!1,d=d||{},e.byPassKeys=a.jMaskGlobals.byPassKeys,e.translation=a.jMaskGlobals.translation,e.translation=a.extend({},e.translation,d.translation),e=a.extend(!0,{},e,d),g=h.getRegexMask(),!1===c?(d.placeholder&&b.attr("placeholder",d.placeholder),b.attr("autocomplete","off"),h.destroyEvents(),h.events(),c=h.getCaret(),h.val(h.getMasked()),h.setCaret(c+h.getMCharsBeforeCount(c,!0))):(h.events(),h.val(h.getMasked()))},e.init(!b.is("input"))};a.maskWatchers={};var c=function(){var c=a(this),e={},f=c.attr("data-mask");return c.attr("data-mask-reverse")&&(e.reverse=!0),c.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0),"true"===c.attr("data-mask-selectonfocus")&&(e.selectOnFocus=!0),d(c,f,e)?c.data("mask",new b(this,f,e)):void 0},d=function(b,c,d){d=d||{};var e=a(b).data("mask"),f=JSON.stringify;b=a(b).val()||a(b).text();try{return"function"==typeof c&&(c=c(b)),"object"!=typeof e||f(e.options)!==f(d)||e.mask!==c}catch(g){}};a.fn.mask=function(c,e){e=e||{};var f=this.selector,g=a.jMaskGlobals,h=a.jMaskGlobals.watchInterval,i=function(){return d(this,c,e)?a(this).data("mask",new b(this,c,e)):void 0};return a(this).each(i),f&&""!==f&&g.watchInputs&&(clearInterval(a.maskWatchers[f]),a.maskWatchers[f]=setInterval(function(){a(document).find(f).each(i)},h)),this},a.fn.unmask=function(){return clearInterval(a.maskWatchers[this.selector]),delete a.maskWatchers[this.selector],this.each(function(){var b=a(this).data("mask");b&&b.remove().removeData("mask")})},a.fn.cleanVal=function(){return this.data("mask").getCleanVal()},a.applyDataMask=function(b){b=b||a.jMaskGlobals.maskElements,(b instanceof a?b:a(b)).filter(a.jMaskGlobals.dataMaskAttr).each(c)};var e={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};a.jMaskGlobals=a.jMaskGlobals||{},e=a.jMaskGlobals=a.extend(!0,{},e,a.jMaskGlobals),e.dataMask&&a.applyDataMask(),setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},e.watchInterval)});